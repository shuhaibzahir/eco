<style>
    .preview {
        overflow: hidden;
        width: 160px;
        height: 160px;
        margin: 10px;
        border: 1px solid red;
    }

    .modal-lg {
        max-width: 1000px !important;
    }
</style>

<div class="content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-8 ml-auto mr-auto">
                <div class="tab-pane" id="link7">
                    <div class="card">
                        <div class="card-header">
                            <h4 class="card-title">Edit Your Product </h4>
                            <p class="card-category">
                                Keep the details correct !
                            </p>
                        </div>

                        <div class="card-body">
                            <div class="col-12">
                                <div class="card ">
                                    <div class="card-header card-header-rose card-header-icon">
                                        <div class="card-icon"> <i class="far fa-clock" style="font-size:34px"></i>
                                        </div>
                                        <h4 class="card-title">EditPRODUCTS</h4>
                                    </div>
                                    <div class="card-body ">
                                        <form method="POST" action="/admin/edit-product/" enctype="multipart/form-data">
                                            <div class="row">
                                                <div class="form-group col-md-6"> <label
                                                        class="bmd-label-floating">Product Name</label>
                                                    <div class="form-group"> <input type="text" class="form-control"
                                                            placeholder="Enter Product Name" name="name"
                                                            value="{{pDetails.Name}}" required>
                                                    </div>
                                                </div>
                                                <input type="text" name="productID" id="" value="{{pDetails._id}}"
                                                    hidden>
                                                <div class="form-group col-md-6"> <label
                                                        class="bmd-label-floating">Select Product Type </label>
                                                    <div class="form-group "> <select class="selectpicker" data-size="7"
                                                            data-style="btn btn-success btn-round" title="Select Type"
                                                            name="product_type" required>
                                                            <option value="{{pDetails.Type}}" selected> >
                                                                {{pDetails.Type}}</option>
                                                            {{#each types as |typeofProduct|}}
                                                            <option value="{{typeofProduct}}">{{typeofProduct}}
                                                            </option>
                                                            {{/each}}
                                                        </select>
                                                    </div>

                                                </div>

                                            </div>
                                            <div class="row">
                                                <div class="col-md-4">
                                                    <label class="bmd-label-floating">Brand Name</label>
                                                    <div class="form-group">
                                                        <select class="selectpicker col-12" data-size="7"
                                                            data-style="btn btn-success btn-round" title="Single Select"
                                                            name="brand" required>
                                                            <option value="{{pDetails.Brand}}" selected> >
                                                                {{pDetails.Brand}}</option>
                                                            {{#each brands as |brandOfProduct|}}
                                                            <option value="{{brandOfProduct}}">{{brandOfProduct}}
                                                            </option>
                                                            {{/each }}

                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <label class="bmd-label-floating">Prize</label>
                                                    <div class="form-group">
                                                        <input type="number" step="0.01" class="form-control"
                                                            placeholder="Enter Product Prize" name="prize"
                                                            value="{{pDetails.Prize}}" required>
                                                    </div>
                                                </div>
                                                <div class="col-md-4" style="padding-left:0px; ">
                                                    <label class="bmd-label-floating">Department</label>
                                                    <div class="form-group ">
                                                        <select class="selectpicker col-12" data-size="7"
                                                            data-style="btn btn-success btn-round" title="Single Select"
                                                            name="department" required>

                                                            <option selected value="{{pDetails.Department}}"> >
                                                                {{pDetails.Department}}</option>
                                                            <option value="Women">Women's</option>
                                                            <option value="Men">Men's</option>
                                                            <option value="Kid">Kid's</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>

                                            {{!-- next row --}}
                                            <div class="row">
                                                <div class="col-md-4">
                                                    <label class="bmd-label-floating">Category</label>
                                                    <div class="form-group">
                                                        <select class="selectpicker col-12" data-size="7"
                                                            data-style="btn btn-success btn-round" title="Single Select"
                                                            name="category" required>
                                                            <option value="{{pDetails.Category}}" selected> > {{pDetails.Category}}</option>
                                                            {{#each categories as |catOfProduct|}}
                                                            <option value="{{catOfProduct}}">{{catOfProduct}}
                                                            </option>
                                                            {{/each }}
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <label class="bmd-label-floating">Color</label>
                                                    <div class="form-group">
                                                        <input type="text" class="form-control"
                                                            placeholder="Enter Product Color" name="color"
                                                            value="{{pDetails.Color}}" required>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <label class="bmd-label-floating">Select Size</label>
                                                    <div class="form-group">
                                                        <select class="selectpicker col-12" data-size="7"
                                                            data-style="btn btn-success btn-round" name="size"
                                                            title="Single Select" required>
                                                            <option value="{{pDetails.Size}}" selected> >
                                                                {{pDetails.Size}}</option>
                                                            <option value="S">Small</option>
                                                            <option value="M">Medium</option>
                                                            <option value="L">Large</option>
                                                            <option value="9">9</option>
                                                            <option value="8">8</option>
                                                            <option value="7">7</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            {{!-- next --}}
                                            <div class="row">
                                                <div class="col-md-4">
                                                    <label class="bmd-label-floating">Quantity</label>
                                                    <div class="form-group">
                                                        <input type="number" min="0" class="form-control"
                                                            placeholder="Product Quantity" name="quantity"
                                                            value="{{pDetails.Quantity}}" required>
                                                    </div>
                                                </div>

                                                <div class="col-md-4">
                                                    <label class="bmd-label-floating">Discount </label>
                                                    <div class="form-group">
                                                        <input type="number" step="0.01" class="form-control"
                                                            placeholder="Discount in Percentage" name="discount"
                                                            value="{{pDetails.Discount}}" required>
                                                    </div>
                                                </div>

                                            </div>
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <h4 class="title">Tags</h4>

                                                    <input type="text"
                                                        value=" {{#each pDetails.Tags as |tagsSet|}} {{tagsSet}},  {{/each}}"
                                                        class="form-control tagsinput" data-role="tagsinput"
                                                        data-color="info" name="tags" required>

                                                </div>
                                                <div class="col-md-4">
                                                    <label class="bmd-label-floating">Selecte Mood</label>
                                                    <div class="form-group">
                                                        <select class="selectpicker" data-size="7"
                                                            data-style="btn btn-success btn-round" name="mood" title="Single Select"
                                                            required >
                                                            <option value="{{pDetails.Mood}}" selected> > {{pDetails.Mood}}</option>
                                                            <option value="indoor">Indoor </option>
                                                            <option value="outdoor">Outdoor</option>

                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-12">
                                                    <label class="bmd-label-floating">Product Decscription
                                                    </label>
                                                    <div class="form-group">
                                                        <textarea name="decsription" class="form-control" cols="30"
                                                            rows="10" value="dfdsf">{{pDetails.Description}}</textarea>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row justify-content-between" style="width:90%">
                                                {{!-- item 1 start --}}
                                                <div class="col-md-2 col-sm-2">
                                                    <h4 class="title"> Image 1</h4>
                                                    <div class="fileinput fileinput-new text-center">
                                                        <div class="fileinput-new thumbnail">
                                                            <img src="/pimages/{{pDetails._id}}-001.jpg"
                                                                id="chekPreview1" alt="...">

                                                        </div>
                                                        <div>
                                                            <span class="btn btn-rose btn-round btn-file">
                                                                <span class="fileinput-new">Select image</span>
                                                                <input type="file" id="image1"
                                                                    accept="image/gif, image/jpeg, image/png" />
                                                                <textarea name="image1_b64" id="imageValue1" cols="30"
                                                                    rows="10" hidden></textarea>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>

                                                {{!-- item 1 end--}}



                                                {{!-- item 2 start --}}
                                                <div class="col-md-2 col-sm-2">
                                                    <h4 class="title"> Image 2</h4>
                                                    <div class="fileinput fileinput-new text-center">
                                                        <div class="fileinput-new thumbnail">
                                                            <img src="/pimages/{{pDetails._id}}-002.jpg"
                                                                id="chekPreview2" alt="...">

                                                        </div>
                                                        <div>
                                                            <span class="btn btn-rose btn-round btn-file">
                                                                <span class="fileinput-new">Select image</span>
                                                                <input type="file" id="image2"
                                                                    accept="image/gif, image/jpeg, image/png" />
                                                                <textarea name="image2_b64" id="imageValue2" cols="30"
                                                                    rows="10" hidden></textarea>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>

                                                {{!-- item 2 end--}}


                                                {{!-- item 3 start --}}
                                                <div class="col-md-2 col-sm-2">
                                                    <h4 class="title"> Image 3</h4>
                                                    <div class="fileinput fileinput-new text-center">
                                                        <div class="fileinput-new thumbnail">
                                                            <img src="/pimages/{{pDetails._id}}-003.jpg"
                                                                id="chekPreview3" alt="...">

                                                        </div>
                                                        <div>
                                                            <span class="btn btn-rose btn-round btn-file">
                                                                <span class="fileinput-new">Select image</span>
                                                                <input type="file" id="image3"
                                                                    accept="image/gif, image/jpeg, image/png" />
                                                                <textarea name="image3_b64" id="imageValue3" cols="30"
                                                                    rows="10" hidden></textarea>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>

                                                {{!-- item 3 end--}}


                                                {{!-- item 4 start --}}
                                                <div class="col-md-2 col-sm-2">
                                                    <h4 class="title"> Image 4</h4>
                                                    <div class="fileinput fileinput-new text-center">
                                                        <div class="fileinput-new thumbnail">
                                                            <img src="/pimages/{{pDetails._id}}-004.jpg"
                                                                id="chekPreview4" alt="...">

                                                        </div>
                                                        <div>
                                                            <span class="btn btn-rose btn-round btn-file">
                                                                <span class="fileinput-new">Select image</span>
                                                                <input type="file" id="image4"
                                                                    accept="image/gif, image/jpeg, image/png" />
                                                                <textarea name="image4_b64" id="imageValue4" cols="30"
                                                                    rows="10" hidden></textarea>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>

                                                {{!-- item 4 end--}}

                                            </div>
                                    </div>
                                    <div class="card-footer ">
                                        <button type="submit" class="btn btn-fill btn-rose">Submit</button>
                                    </div>
                                    </form>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- Modal 1-->
<div class="modal fade" id="modal1" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Crop Image Here</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="img-container">
                    <div class="row">
                        <div class="col-md-8">
                            <img src="" id="sampleImage1" />
                        </div>
                        <div class="col-md-4">
                            <div class="preview" id="preview1"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">

                <button type="button" id="crop1" class="btn btn-primary">Crop</button>
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>

            </div>
        </div>
    </div>
</div>
<!-- Modal  1 end-->



<!-- Modal 2-->
<div class="modal fade" id="modal2" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Crop Image Here</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="img-container">
                    <div class="row">
                        <div class="col-md-8">
                            <img src="" id="sampleImage2" />
                        </div>
                        <div class="col-md-4">
                            <div class="preview" id="preview2"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">

                <button type="button" id="crop2" class="btn btn-primary">Crop</button>
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>

            </div>
        </div>
    </div>
</div>
<!-- Modal  2 end-->


<!-- Modal 3-->
<div class="modal fade" id="modal3" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Crop Image Here</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="img-container">
                    <div class="row">
                        <div class="col-md-8">
                            <img src="" id="sampleImage3" />
                        </div>
                        <div class="col-md-4">
                            <div class="preview" id="preview3"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">

                <button type="button" id="crop3" class="btn btn-primary">Crop</button>
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>

            </div>
        </div>
    </div>
</div>
<!-- Modal  3 end-->

<!-- Modal 4-->
<div class="modal fade" id="modal4" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Crop Image Here</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="img-container">
                    <div class="row">
                        <div class="col-md-8">
                            <img src="" id="sampleImage4" />
                        </div>
                        <div class="col-md-4">
                            <div class="preview" id="preview4"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">

                <button type="button" id="crop4" class="btn btn-primary">Crop</button>
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>

            </div>
        </div>
    </div>
</div>
<!-- Modal  4 end-->


<script>
    $('document').ready(function () {
        //modal1 and image 1
        var image1 = document.getElementById('sampleImage1');
        var modal1 = $('#modal1');
        var cropper1;

        $('#image1').change(function (event) {

            var file = this.files[0];
            var fileType = file["type"];
            if (fileType.search('image') >= 0) {

                var files = event.target.files;

                var done = function (url) {
                    image1.src = url;
                    modal1.modal('show');
                };

                if (files && files.length > 0) {
                    reader = new FileReader();
                    reader.onload = function (event) {
                        done(reader.result);
                    };
                    reader.readAsDataURL(files[0]);
                }
            } else {
                Swal.fire({
                    position: 'center',
                    icon: 'error',
                    title: "Invalid Image File",
                    showConfirmButton: true,

                }).then(()=>{
                  
                    this.value = null
                })
            }
        });

        modal1.on('shown.bs.modal', function () {
            cropper1 = new Cropper(image1, {
                aspectRatio: 1,
                viewMode: 3,
                preview: '#preview1'
            });
        }).on('hidden.bs.modal', function () {
            cropper1.destroy();
            cropper1 = null;
        });

        $('#crop1').click(function () {
            canvas = cropper1.getCroppedCanvas({
                width: 400,
                height: 400
            });

            canvas.toBlob(function (blob) {
                url = URL.createObjectURL(blob);
                var reader = new FileReader();
                reader.readAsDataURL(blob);
                reader.onloadend = function () {
                    var base64data = reader.result;
                    modal1.modal('hide');
                    $("#imageValue1").val(base64data)
                    $('#chekPreview1').attr('src', base64data);
                };
            });
        });
        //modal1 and image 1 end

        //modal2 and image 2
        var image2 = document.getElementById('sampleImage2');
        var modal2 = $('#modal2');
        var cropper2;

        $('#image2').change(function (event) {
            var file = this.files[0];
            var fileType = file["type"];
            if (fileType.search('image') >= 0) {


                var files = event.target.files;

                var done = function (url) {
                    image2.src = url;
                    modal2.modal('show');
                };

                if (files && files.length > 0) {
                    reader = new FileReader();
                    reader.onload = function (event) {
                        done(reader.result);
                    };
                    reader.readAsDataURL(files[0]);
                }

            } else {
                Swal.fire({
                    position: 'center',
                    icon: 'error',
                    title: "Invalid Image File",
                    showConfirmButton: false,

                }).then(()=>{
                  
                    this.value = null
                })
            }
        });

        modal2.on('shown.bs.modal', function () {
            cropper2 = new Cropper(image2, {
                aspectRatio: 1,
                viewMode: 3,
                preview: '#preview2'
            });
        }).on('hidden.bs.modal', function () {
            cropper2.destroy();
            cropper2 = null;
        });

        $('#crop2').click(function () {
            canvas = cropper2.getCroppedCanvas({
                width: 400,
                height: 400
            });

            canvas.toBlob(function (blob) {
                url = URL.createObjectURL(blob);
                var reader = new FileReader();
                reader.readAsDataURL(blob);
                reader.onloadend = function () {
                    var base64data = reader.result;
                    modal2.modal('hide');
                    $("#imageValue2").val(base64data)
                    $('#chekPreview2').attr('src', base64data);
                };
            });
        });
        //image 2 and modal 2 end


        //modal3 and image 3 start
        var image3 = document.getElementById('sampleImage3');
        var modal3 = $('#modal3');
        var cropper3;

        $('#image3').change(function (event) {

            var file = this.files[0];
            var fileType = file["type"];
            if (fileType.search('image') >= 0) {


                var files = event.target.files;

                var done = function (url) {
                    image3.src = url;
                    modal3.modal('show');
                };

                if (files && files.length > 0) {
                    reader = new FileReader();
                    reader.onload = function (event) {
                        done(reader.result);
                    };
                    reader.readAsDataURL(files[0]);
                }
            } else {
                Swal.fire({
                    position: 'center',
                    icon: 'error',
                    title: "Invalid Image File",
                    showConfirmButton: false,

                }).then(()=>{
                  
                    this.value = null
                })
            }
        });

        modal3.on('shown.bs.modal', function () {
            cropper3 = new Cropper(image3, {
                aspectRatio: 1,
                viewMode: 3,
                preview: '#preview3'
            });
        }).on('hidden.bs.modal', function () {
            cropper3.destroy();
            cropper3 = null;
        });

        $('#crop3').click(function () {
            canvas = cropper3.getCroppedCanvas({
                width: 400,
                height: 400
            });

            canvas.toBlob(function (blob) {
                url = URL.createObjectURL(blob);
                var reader = new FileReader();
                reader.readAsDataURL(blob);
                reader.onloadend = function () {
                    var base64data = reader.result;
                    modal3.modal('hide');
                    $("#imageValue3").val(base64data)
                    $('#chekPreview3').attr('src', base64data);
                };
            });
        });
        //image 3 and modal 3 end

        //modal4 and image 4 start
        var image4 = document.getElementById('sampleImage4');
        var modal4 = $('#modal4');
        var cropper4;

        $('#image4').change(function (event) {

            var file = this.files[0];
            var fileType = file["type"];
            if (fileType.search('image') >= 0) {
                var files = event.target.files;

                var done = function (url) {
                    image4.src = url;
                    modal4.modal('show');
                };

                if (files && files.length > 0) {
                    reader = new FileReader();
                    reader.onload = function (event) {
                        done(reader.result);
                    };
                    reader.readAsDataURL(files[0]);
                }
            } else {
                Swal.fire({
                    position: 'center',
                    icon: 'error',
                    title: "please Select Image",
                    showConfirmButton: true,

                }).then(()=>{
                  
                    this.value = null
                })
            }
        });

        modal4.on('shown.bs.modal', function () {
            cropper4 = new Cropper(image4, {
                aspectRatio: 1,
                viewMode: 3,
                preview: '#preview4'
            });
        }).on('hidden.bs.modal', function () {
            cropper4.destroy();
            cropper4 = null;
        });

        $('#crop4').click(function () {
            canvas = cropper4.getCroppedCanvas({
                width: 400,
                height: 400
            });

            canvas.toBlob(function (blob) {
                url = URL.createObjectURL(blob);
                var reader = new FileReader();
                reader.readAsDataURL(blob);
                reader.onloadend = function () {
                    var base64data = reader.result;
                    modal4.modal('hide');
                    $("#imageValue4").val(base64data)
                    $('#chekPreview4').attr('src', base64data);
                };
            });
        });

    });
</script>